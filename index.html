
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Commander Battle Tool</title>

<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:white;}
.hero{
    height:100vh;
    background:url('dragon_bg.jpg') center/cover no-repeat;
    display:flex;
    align-items:flex-start;
    justify-content:center;
    padding-top:40px;
}
.start-btn{
    padding:14px 26px;
    font-size:16px;
    font-weight:bold;
    background:transparent;
    color:#baff66;
    border:2px solid #baff66;
    border-radius:6px;
    cursor:pointer;
    box-shadow:0 0 10px rgba(186,255,102,0.4);
}
.tool{display:none;padding:15px;max-width:1000px;margin:auto;}
.player{
    background:#1a1a1a;
    padding:14px;
    margin-bottom:14px;
    border-left:6px solid #333;
}
.player.glow{box-shadow:0 0 18px rgba(186,255,102,0.6);}
.name-input{
    font-size:16px;
    font-weight:bold;
    width:100%;
    background:#111;
    color:white;
    border:1px solid #444;
    padding:6px;
}
.life{font-size:64px;text-align:center;margin:10px 0;}
.counter-row{text-align:center;margin-bottom:8px;}
button.small{padding:4px 8px;margin:2px;background:#333;color:white;border:none;}
button.update{margin-top:10px;padding:10px 18px;background:#baff66;border:none;font-weight:bold;cursor:pointer;}
.collapsible{background:#222;padding:8px;margin-top:8px;}
.compression{
    position:fixed;
    bottom:0;
    width:100%;
    background:#000;
    color:#baff66;
    padding:10px;
    text-align:center;
    font-weight:bold;
    display:none;
}
</style>
</head>

<body>

<div class="hero" id="hero">
    <button class="start-btn" onclick="startTool()">Begin Commander Battle Simulation</button>
</div>

<div class="tool" id="tool">
<h2>Commander Table Tool</h2>
<div id="players"></div>
<button class="update" onclick="calculateLeader()">Update Leader</button>
</div>

<div class="compression" id="compressionBar">
Compression Level: Developing
</div>

<script>
function startTool(){
    document.getElementById("hero").style.display="none";
    document.getElementById("tool").style.display="block";
    document.getElementById("compressionBar").style.display="block";
    buildPlayers();
}

function buildPlayers(){
    const container=document.getElementById("players");
    for(let i=1;i<=4;i++){
        container.innerHTML += `
        <div class="player">
            <input class="name-input" value="Player ${i}">
            <div class="life" id="life${i}">40</div>
            <div class="counter-row">
                <button class="small" onclick="changeLife(${i}, -1)">-</button>
                <button class="small" onclick="changeLife(${i}, 1)">+</button>
            </div>
            Infect: <span id="infect${i}">0</span>
            <div class="counter-row">
                <button class="small" onclick="changeInfect(${i}, -1)">-</button>
                <button class="small" onclick="changeInfect(${i}, 1)">+</button>
            </div>
            <details class="collapsible">
                <summary>Commander Damage</summary>
                vs P1: <span id="cd${i}_1">0</span>
                <button class="small" onclick="changeCD(${i},1,-1)">-</button>
                <button class="small" onclick="changeCD(${i},1,1)">+</button><br>
                vs P2: <span id="cd${i}_2">0</span>
                <button class="small" onclick="changeCD(${i},2,-1)">-</button>
                <button class="small" onclick="changeCD(${i},2,1)">+</button><br>
                vs P3: <span id="cd${i}_3">0</span>
                <button class="small" onclick="changeCD(${i},3,-1)">-</button>
                <button class="small" onclick="changeCD(${i},3,1)">+</button>
            </details>
        </div>`;
    }
}

function changeLife(p, delta){
    let el=document.getElementById("life"+p);
    el.innerText=parseInt(el.innerText)+delta;
}

function changeInfect(p, delta){
    let el=document.getElementById("infect"+p);
    el.innerText=Math.max(0,parseInt(el.innerText)+delta);
}

function changeCD(p, opp, delta){
    let el=document.getElementById("cd"+p+"_"+opp);
    el.innerText=Math.max(0,parseInt(el.innerText)+delta);
}

function calculateLeader(){
    const players=document.querySelectorAll(".player");
    let bestLife=-999;
    let bestIndex=0;

    players.forEach((p,i)=>{
        let life=parseInt(document.getElementById("life"+(i+1)).innerText);
        if(life>bestLife){
            bestLife=life;
            bestIndex=i;
        }
        p.classList.remove("glow");
    });

    players[bestIndex].classList.add("glow");
    document.getElementById("compressionBar").innerText="Compression Level: Live Play Mode";
}
</script>

</body>
</html>
